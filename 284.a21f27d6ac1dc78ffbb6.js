(self.webpackChunksoftuni_angular_exam=self.webpackChunksoftuni_angular_exam||[]).push([[284],{7284:(e,n,t)=>{"use strict";t.r(n),t.d(n,{CommentsModule:()=>Q});var o=t(9843),r=t(1116),c=t(1462),s=t(5366),i=t(7653),m=t(8512);let a=(()=>{class e{constructor(){this.currentCommentId="",this.currentCommentIdSubject=new m.X(this.currentCommentId)}setCurrentCommentId(e){this.currentCommentId=e,this.currentCommentIdSubject.next(this.currentCommentId)}clearCurrentCommentId(){this.currentCommentId="",this.currentCommentIdSubject.next(this.currentCommentId)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=t(6659),d=t(2588),l=t(9410),p=t(7738);function g(e,n){if(1&e&&(s.TgZ(0,"p",8),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.errorMsgOnGetUser)}}const h=function(e){return{"background-image":e}};let f=(()=>{class e{constructor(e,n){this._firestoreCollections=e,this._sharedParamsService=n,this.errorMsgOnGetUser=""}onShowUserInfo(e){this._firestoreCollections.getUserData(e).subscribe(e=>{const n=e.map(e=>Object.assign({id:e.payload.doc.id},e.payload.doc.data()));this._sharedParamsService.showUserInfo({name:n[0].name,email:n[0].email,phoneCode:n[0].phoneCode,phone:n[0].phone,userImgUrl:n[0].userImgUrl}),this.errorMsgOnGetUser=""},e=>{this.errorMsgOnGetUser=e.message})}}return e.\u0275fac=function(n){return new(n||e)(s.Y36(i.P),s.Y36(d.T))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-comment-el"]],inputs:{comment:"comment"},decls:15,vars:19,consts:[[1,"comment-header"],[1,"comment-header__left",3,"click"],[1,"comment-header__img",3,"ngStyle"],[1,"comment-header__name"],[1,"comment-header__date"],[1,"comment-content"],[1,"comment-content__text"],["class","error-msg",4,"ngIf"],[1,"error-msg"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.NdJ("click",function(){return n.onShowUserInfo(n.comment.email)}),s._UZ(2,"div",2),s.ALo(3,"async"),s.ALo(4,"getUserInfo"),s.TgZ(5,"p",3),s._uU(6),s.qZA(),s.qZA(),s.TgZ(7,"p",4),s._uU(8),s.ALo(9,"date"),s.ALo(10,"date"),s.qZA(),s.qZA(),s.TgZ(11,"div",5),s.TgZ(12,"p",6),s._uU(13),s.qZA(),s.qZA(),s.YNc(14,g,2,1,"p",7)),2&e&&(s.xp6(2),s.Q6J("ngStyle",s.VKq(17,h,s.lcZ(3,6,s.xi3(4,8,n.comment.email,"userImg")))),s.xp6(4),s.hij(" ",n.comment.userName," "),s.xp6(2),s.AsE(" ",s.xi3(9,11,n.comment.date.toDate(),"dd.MM.yyyy")," at ",s.xi3(10,14,n.comment.date.toDate(),"HH:mm")," "),s.xp6(5),s.Oqu(n.comment.description),s.xp6(1),s.Q6J("ngIf",n.errorMsgOnGetUser))},directives:[r.PC,r.O5],pipes:[r.Ov,p.c,r.uU],styles:[".comment-header[_ngcontent-%COMP%]{background-color:var(--color4);padding:2%;border-top-left-radius:5px;border-top-right-radius:5px;font-weight:700;font-style:italic}@media only screen and (min-width:540px){.comment-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}}.comment-header__left[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:10px;display:flex;align-items:center}@media only screen and (min-width:540px){.comment-header__left[_ngcontent-%COMP%]{margin-bottom:0}}.comment-header__img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;border:2px solid #b53636;background-repeat:no-repeat;background-size:cover;background-position:50%;margin-right:5px}.comment-header__name[_ngcontent-%COMP%]{color:#b53636;font-size:1.1em}.comment-header__date[_ngcontent-%COMP%]{font-size:1.1em;text-align:right;color:var(--color7)}.comment-content[_ngcontent-%COMP%]{white-space:pre-line;padding:10px}.comment-content__text[_ngcontent-%COMP%]{color:var(--color6)}"]}),e})();var _=t(1858);function b(e,n){if(1&e&&(s.TgZ(0,"p",4),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.errorOnAddComment)}}function C(e,n){if(1&e&&(s.TgZ(0,"p",4),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.errorOnAddReply)}}let x=(()=>{class e{constructor(e,n,t){this._authService=e,this._firestoreCollections=n,this._currentCommentId=t,this.errorOnAddComment="",this.errorOnAddReply=""}ngOnInit(){this.commnetForm=new c.cw({commentArea:new c.NI(null,c.kI.required)}),this._userSubscription=this._authService.user.subscribe(e=>{this.user=e}),this._currentCommentIdSubscription=this._currentCommentId.currentCommentIdSubject.subscribe(e=>{this.currentCommentId=e})}ngOnDestroy(){this._userSubscription.unsubscribe(),this._currentCommentIdSubscription.unsubscribe()}onSubmitComment(e){if(e.invalid)return;const n=this.user.name,t=this.user.email,o=_.Z.firestore.Timestamp.now(),r=e.value.commentArea.trim();this.currentCommentId?this._firestoreCollections.setReply({userName:n,email:t,date:o,description:r,commentId:this.currentCommentId}).then(()=>{e.reset(),this._currentCommentId.clearCurrentCommentId(),this.errorOnAddReply=""},e=>{this.errorOnAddReply=e.message}):this._firestoreCollections.setComment({userName:n,email:t,date:o,description:r}).then(()=>{e.reset(),this.errorOnAddComment=""},e=>{this.errorOnAddComment=e.message})}}return e.\u0275fac=function(n){return new(n||e)(s.Y36(u.e),s.Y36(i.P),s.Y36(a))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-comment-form"]],decls:8,vars:4,consts:[[3,"formGroup","ngSubmit"],["placeholder","Type your comment...","formControlName","commentArea",1,"comments-textarea"],["type","submit",1,"btn-default","btn-default-center",3,"disabled"],["class","error-msg",4,"ngIf"],[1,"error-msg"]],template:function(e,n){1&e&&(s.TgZ(0,"form",0),s.NdJ("ngSubmit",function(){return n.onSubmitComment(n.commnetForm)}),s.TgZ(1,"div"),s._UZ(2,"textarea",1),s.qZA(),s.TgZ(3,"div"),s.TgZ(4,"button",2),s._uU(5," Add your comment "),s.qZA(),s.YNc(6,b,2,1,"p",3),s.YNc(7,C,2,1,"p",3),s.qZA(),s.qZA()),2&e&&(s.Q6J("formGroup",n.commnetForm),s.xp6(4),s.Q6J("disabled",!n.commnetForm.valid),s.xp6(2),s.Q6J("ngIf",n.errorOnAddComment),s.xp6(1),s.Q6J("ngIf",n.errorOnAddReply))},directives:[c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,r.O5],styles:[".comments-textarea[_ngcontent-%COMP%]{outline-color:#b53636;background-color:var(--color12);border:1px solid var(--color9);border-radius:5px;font-size:1.2em;padding:10px;resize:none;width:100%;height:100px;margin-bottom:20px;box-sizing:border-box;color:var(--color7);scrollbar-color:var(--color14) #0000;scrollbar-width:thin}.comments-textarea[_ngcontent-%COMP%]::placeholder{color:#b53636}.comments-textarea[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#b53636}.comments-textarea[_ngcontent-%COMP%]:-moz-placeholder, .comments-textarea[_ngcontent-%COMP%]::-moz-placeholder{color:#b53636}.comments-textarea[_ngcontent-%COMP%]:-ms-input-placeholder{color:#b53636}.comments-textarea[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none}.comments-textarea[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--color14)}@media not all and (pointer:coarse){.comments-textarea[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:var(--color16)}}.comments-textarea[_ngcontent-%COMP%]::-webkit-scrollbar:vertical{width:8px}.comments-textarea[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal{height:8px}.comments-textarea[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:8px}.comments-textarea[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:8px;background-color:initial}"]}),e})();function Z(e,n){if(1&e&&(s.TgZ(0,"div",5),s._UZ(1,"app-comment-el",1),s.qZA()),2&e){const e=n.$implicit;s.xp6(1),s.Q6J("comment",e)}}function O(e,n){if(1&e){const e=s.EpF();s.TgZ(0,"button",10),s.NdJ("click",function(){s.CHM(e);const n=s.oxw(2);return n.onReply(n.comment.id)}),s._uU(1," Reply "),s.qZA()}}function v(e,n){if(1&e){const e=s.EpF();s.TgZ(0,"button",10),s.NdJ("click",function(){return s.CHM(e),s.oxw(2).closeReply()}),s._uU(1," Close "),s.qZA()}}function I(e,n){1&e&&(s.TgZ(0,"div",11),s._UZ(1,"app-comment-form"),s.qZA())}function P(e,n){if(1&e&&(s.TgZ(0,"div",6),s.TgZ(1,"div",7),s.YNc(2,O,2,0,"button",8),s.YNc(3,v,2,0,"button",8),s.qZA(),s.YNc(4,I,2,0,"div",9),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.Q6J("ngIf",e.currentCommentId!==e.comment.id),s.xp6(1),s.Q6J("ngIf",e.currentCommentId==e.comment.id),s.xp6(1),s.Q6J("ngIf",e.currentCommentId==e.comment.id)}}let A=(()=>{class e{constructor(e){this._currentCommentId=e}ngOnInit(){this._currentCommentIdSubscription=this._currentCommentId.currentCommentIdSubject.subscribe(e=>{this.currentCommentId=e})}ngOnDestroy(){this._currentCommentIdSubscription.unsubscribe()}onReply(e){this._currentCommentId.setCurrentCommentId(e)}closeReply(){this._currentCommentId.clearCurrentCommentId()}}return e.\u0275fac=function(n){return new(n||e)(s.Y36(a))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-comment"]],inputs:{comment:"comment",isAuth:"isAuth"},decls:5,vars:3,consts:[[1,"comment"],[3,"comment"],[1,"comment-replies"],["class","reply",4,"ngFor","ngForOf"],["class","reply-option",4,"ngIf"],[1,"reply"],[1,"reply-option"],[1,"reply-option__btns"],["class","btn-default narrow-btn",3,"click",4,"ngIf"],["class","reply-option__form",4,"ngIf"],[1,"btn-default","narrow-btn",3,"click"],[1,"reply-option__form"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s._UZ(1,"app-comment-el",1),s.TgZ(2,"div",2),s.YNc(3,Z,2,1,"div",3),s.qZA(),s.YNc(4,P,5,3,"div",4),s.qZA()),2&e&&(s.xp6(1),s.Q6J("comment",n.comment),s.xp6(2),s.Q6J("ngForOf",n.comment.replies),s.xp6(1),s.Q6J("ngIf",n.isAuth))},directives:[f,r.sg,r.O5,x],styles:[".comment[_ngcontent-%COMP%]{border:1px solid var(--color9);border-radius:5px;margin-bottom:10px;background-color:var(--color12)}.comment-replies[_ngcontent-%COMP%]{margin-top:20px;width:90%;margin-left:8%}.comment-replies[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]{border:1px solid var(--color9);border-radius:5px;margin-bottom:10px}.reply-option[_ngcontent-%COMP%]{margin:2%}.reply-option__btns[_ngcontent-%COMP%]{margin-bottom:2%}"]}),e})();const w=function(e){return{"background-image":e}};let M=(()=>{class e{constructor(e){this._sharedParamsService=e}ngOnInit(){}closeUserInfo(){this._sharedParamsService.overlayClick()}}return e.\u0275fac=function(n){return new(n||e)(s.Y36(d.T))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-comment-user-info"]],inputs:{shownUser:"shownUser"},decls:22,vars:10,consts:[[1,"comment-user-info-container"],[1,"comment-user-info"],[1,"comment-user-info__close-btn",3,"click"],[1,"comment-user-info__avatar",3,"ngStyle"],[1,"comment-user-info__element"],[1,"comment-info-img"],["src","../../../assets/images/sign-forms/user.png"],["src","../../../assets/images/sign-forms/phone.png"],[3,"href"],["src","../../../assets/images/sign-forms/email.png"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.NdJ("click",function(){return n.closeUserInfo()}),s._uU(3,"X"),s.qZA(),s._UZ(4,"div",3),s.TgZ(5,"div",4),s.TgZ(6,"div",5),s._UZ(7,"img",6),s.qZA(),s.TgZ(8,"div"),s._uU(9),s.qZA(),s.qZA(),s.TgZ(10,"div",4),s.TgZ(11,"div",5),s._UZ(12,"img",7),s.qZA(),s.TgZ(13,"div"),s.TgZ(14,"a",8),s._uU(15),s.qZA(),s.qZA(),s.qZA(),s.TgZ(16,"div",4),s.TgZ(17,"div",5),s._UZ(18,"img",9),s.qZA(),s.TgZ(19,"div"),s.TgZ(20,"a",8),s._uU(21),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(4),s.Q6J("ngStyle",s.VKq(8,w,"url("+n.shownUser.userImgUrl+")")),s.xp6(5),s.hij(" ",n.shownUser.name," "),s.xp6(5),s.hYB("href","tel:",n.shownUser.phoneCode,"",n.shownUser.phone,"",s.LSH),s.xp6(1),s.AsE("+",n.shownUser.phoneCode,"",n.shownUser.phone,""),s.xp6(5),s.MGl("href","mailto:",n.shownUser.email,"",s.LSH),s.xp6(1),s.Oqu(n.shownUser.email))},directives:[r.PC],styles:[".comment-user-info-container[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;z-index:800;transform:translate3d(-50%,-50%,0)}.comment-user-info-container[_ngcontent-%COMP%]   .comment-user-info[_ngcontent-%COMP%]{position:relative;margin-top:50px;width:310px;box-sizing:border-box;background-color:#000000e6;box-shadow:0 0 5px 2px #b53636e6;border-radius:3px;padding:20px}.comment-user-info-container[_ngcontent-%COMP%]   .comment-user-info__avatar[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:cover;background-position:50%;border:3px solid #b53636;border-radius:50%;margin:0 auto;width:125px;height:125px}.comment-user-info-container[_ngcontent-%COMP%]   .comment-user-info__element[_ngcontent-%COMP%]{color:#fff;margin-top:20px;display:flex;align-items:center}.comment-user-info-container[_ngcontent-%COMP%]   .comment-user-info__element[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff!important}.comment-user-info-container[_ngcontent-%COMP%]   .comment-user-info__close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:13px;color:#fff;cursor:pointer;font-size:1.2em}@media not all and (pointer:coarse){.comment-user-info-container[_ngcontent-%COMP%]   .comment-user-info__close-btn[_ngcontent-%COMP%]:hover{color:#b53636}}.comment-user-info-container[_ngcontent-%COMP%]   .comment-user-info[_ngcontent-%COMP%]   .comment-info-img[_ngcontent-%COMP%]{width:20px;margin-right:10px}.comment-user-info-container[_ngcontent-%COMP%]   .comment-user-info[_ngcontent-%COMP%]   .comment-info-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}.comment-user-info-container[_ngcontent-%COMP%]   .comment-user-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:449}"]}),e})();function y(e,n){1&e&&s._UZ(0,"app-loading-spinner")}function U(e,n){if(1&e&&s._UZ(0,"app-comment",9),2&e){const e=n.$implicit,t=s.oxw(2);s.Q6J("comment",e)("isAuth",t.isAuth)}}function q(e,n){if(1&e&&(s.TgZ(0,"div"),s.YNc(1,U,1,2,"app-comment",8),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.comments)}}function T(e,n){1&e&&(s.TgZ(0,"p",10),s._uU(1," There are no comments added yet! "),s.qZA())}function S(e,n){1&e&&(s.TgZ(0,"div"),s._UZ(1,"app-comment-form"),s.qZA())}function k(e,n){1&e&&(s.TgZ(0,"p",11),s._uU(1,"Please Sign in to add your comment!"),s.qZA())}function J(e,n){if(1&e&&s._UZ(0,"app-comment-user-info",12),2&e){const e=s.oxw();s.Q6J("shownUser",e.commentParams.shownUser)}}let Y=(()=>{class e{constructor(e,n,t,o){this._firestoreCollections=e,this._currentCommentId=n,this._authService=t,this._sharedParamsService=o,this.errorOnGetComments=""}ngOnInit(){this._firestoreCollections.getComments().subscribe(e=>{this.comments=e.map(e=>Object.assign({id:e.payload.doc.id},e.payload.doc.data())),this.errorOnGetComments=""},e=>{this.errorOnGetComments=e.message}),this._currentCommentIdSubscription=this._currentCommentId.currentCommentIdSubject.subscribe(e=>{this.currentCommentId=e}),this._isAuthSubscription=this._authService.user.subscribe(e=>{this.isAuth=!!e}),this._sharedParamsSubscription=this._sharedParamsService.navParamsSubject.subscribe(e=>{this.navParams=e}),this._commentParamsSubscription=this._sharedParamsService.initialCommentParamsSubject.subscribe(e=>{this.commentParams=e})}ngOnDestroy(){this._currentCommentIdSubscription.unsubscribe(),this._sharedParamsSubscription.unsubscribe(),this._commentParamsSubscription.unsubscribe(),this._isAuthSubscription.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(s.Y36(i.P),s.Y36(a),s.Y36(u.e),s.Y36(d.T))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-comments"]],decls:11,vars:7,consts:[[1,"container"],[1,"comments-container"],[4,"ngIf"],[1,"comments"],["class","error-msg",4,"ngIf"],[1,"hr-border"],["class","comments-auth",4,"ngIf"],[3,"shownUser",4,"ngIf"],[3,"comment","isAuth",4,"ngFor","ngForOf"],[3,"comment","isAuth"],[1,"error-msg"],[1,"comments-auth"],[3,"shownUser"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.YNc(2,y,1,0,"app-loading-spinner",2),s.TgZ(3,"p",3),s._uU(4),s.qZA(),s.YNc(5,q,2,1,"div",2),s.YNc(6,T,2,0,"p",4),s._UZ(7,"hr",5),s.YNc(8,S,2,0,"div",2),s.YNc(9,k,2,0,"p",6),s.qZA(),s.YNc(10,J,1,1,"app-comment-user-info",7),s.qZA()),2&e&&(s.xp6(2),s.Q6J("ngIf",!n.comments),s.xp6(2),s.hij(" Comments (",null==n.comments?null:n.comments.length,") "),s.xp6(1),s.Q6J("ngIf",n.comments),s.xp6(1),s.Q6J("ngIf",0==(null==n.comments?null:n.comments.length)),s.xp6(2),s.Q6J("ngIf",!n.currentCommentId&&n.isAuth),s.xp6(1),s.Q6J("ngIf",!n.isAuth),s.xp6(1),s.Q6J("ngIf",n.commentParams.showUserInfo))},directives:[r.O5,l.g,r.sg,A,x,M],styles:[".comments-container[_ngcontent-%COMP%]{position:relative;background-color:var(--color2);box-shadow:0 0 10px 1px #000000bf;padding:5%}.comments-container[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]{color:#b53636;margin-bottom:20px;font-weight:700;font-size:1.3em}.hr-border[_ngcontent-%COMP%]{border-top:1px solid var(--color9);border-bottom:1px solid var(--color5);margin:20px 0}.comments-auth[_ngcontent-%COMP%]{color:#b53636;font-weight:700;text-align:center}"]}),e})();var N=t(5425);let Q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[r.ez,N.m,c.UX,o.Bz.forChild([{path:"",component:Y}])]]}),e})()}}]);